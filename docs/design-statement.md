（平台跳跃游戏？）XXX游戏的设计与实现
基于WebGL与ThreeJS的HTML5游戏

参考文献
[1] Hickson I. HTML5 A vocabulary and associated APIs for HTML and XHTML.
https://www.w3.org/TR/html5/, 2014-10-28.
[2] Gibbs S. Google to ban Adobe Flash-based advertising. https://www.theguardian.com/,
2016-02-10.
[3] Echterhoff J. WebGL Roadmap. https://forum.unity3d.com, 2005-08-18.
[4]O. Severa, M. Goubej and J. Konigsmarkova. Unified framework for generation of 3D
web visualization for mechatronic systems. Journal of Physics Conference Series,
2015, 659(1):02-04

av4674661，起小点看PDD鬼畜被本人发现怒gay。
av4636026，笑笑和西卡看PDD鬼畜
av4635386，pdd翻车鬼畜
av4619916，pdd第一次看自己鬼畜
av4628147，pdd第二次看自己鬼畜
av4636131，pdd第三次看自己鬼畜
av4660804 , 侯爷看PDD鬼畜视频
av4672725，小狗看pdd看自己鬼畜视频



BabylonJS需要注意的重点：
https://doc.babylonjs.com/how_to/customizing_camera_inputs   输入相关。仔细研究

https://doc.babylonjs.com/babylon101/animations 各种模式的动画， 另外如果需要引入插件，需要对canvas初始化时做额外设置：见本篇末尾，deterministic lockstep  

  	<https://www.babylonjs-playground.com/#DU4FPJ#3>  一个物理引擎同步的例子，目前没太看懂具体意思



4.4凌晨 进度： <https://doc.babylonjs.com/babylon101/intersect_collisions_-_mesh>  还没看



趁现在还不困，写写游戏的一些规则设计：

- 人物控制：
  - 基本移动：A左，D右，（W上，S下）
    - 实现方式猜想：input里面重新注册事件
  - J键向前方发射子弹（dark力量？），K跳， L开盾（2s之内无敌，需要充能，最多2层，可以通过拾取道具加快充能速度，但最多只能充能到2层）
    - 实现方式猜想：同上，input里面重新注册事件
  - 二段跳
    - 实现方式猜想：在注册的跳跃事件里面加一个状态机
  - 高跳：起跳之前按住W
    - 实现方式猜想：在注册的K按键跳跃事件中：检测是否已经按住了W，按住了就是高跳
  - 远跳，跳得更远，在起跳的一瞬间按方向键↓即可大跳（用动作状态机实现，看看现不现实）
    - 实现方式猜想：人物的移动需要一个状态机，用Blender做一个（最后再说吧，等整体ok的时候做个简单的）
  - 购买道具快捷键：B和N（对应2个道具）
  - 传送快捷键：R和T（R往前一个，T往后一个，支持循环检索）
- 地图元素：
  - 基本地面：无害。 颜色：普通（找一个能区分开的颜色，比如黑灰色）
    - 实现方式猜想：普通createbox
  - 火焰地带：主角在其中时，都将每秒受到伤害【伤害值：待定】。 颜色：红色
    - 实现方式猜想：createbox，颜色修改，然后内在属性值不一样，碰撞的时候估计能区分出来？
  - 地刺/在各种位置的刺：碰到时受到最大HP25%的伤害。但碰到的时候自动触发一层2s无敌的护盾（不算充能数）。颜色：银色（金属材质？）
    - 实现方式猜想：同createbox，（或者一大堆cone，感觉不现实），然后碰撞检测
  - 灵魂之力：收集灵魂之力可以强化攻击力、回复护盾充能槽。
    - 实现方式猜想：createsphere，球体+碰撞检测。 做个光效让它看起来比较炫
  - （看情况决定是否实现）水：自己和敌人在水中移动速度变慢【暂定为正常速度的70%】。颜色：蓝色。
    - 实现方式猜想：createbox，颜色修改，然后一些内置的属性值得跟普通地面区分开
  - （看情况决定是否实现）不断（横向或纵向）发射飞镖的机关：被飞镖击中受到10%MaxHP的伤害。颜色：红蓝色（？）
    - 实现方式猜想：一个固定的贴图，标示飞镖发射点；一个播放飞镖位移的循环动画。飞镖上有碰撞检测
- 怪物：击杀怪物可以赚取金钱。
  - 近战巡逻兵（恶犬部队）
    - 视野范围：当前平面，视线前方，近距离（判定是否与主角在同一x轴）
    - 攻击方式：接触伤害
    - 发现主角后：追赶（但不能落到所在平台之下，走到边缘就停住）。
    - 主角离开视线后：1s后回归来回巡逻的状态
      - 整个的实现方式猜想：巡逻兵模式（参考一下之前写过的PatrolDemo）
  - 手枪兵（被精神控制的醒哥，所指挥的部下，（当然实际上救了醒哥之后并没有直接解救出这群部下））
    - 视野范围：当前平面，视线前方，距离较远（暂定：半个屏幕大小） （判定是否与主角在同一x轴）
    - 攻击方式：远程攻击，发射子弹
    - 发现主角后：原地不动，1s后发射子弹攻击主角。
    - 主角离开视线后：1s之后回归来回巡逻的状态，继续巡逻
      - 整个的实现方式猜想：巡逻兵模式（参考PatrolDemo的实现思路）
- 醒哥的保卫队工具商店：
  - 完成【第一阶段任务：救出醒哥】后解锁
    - 实现方式猜想：维护一个本轮游戏中有效的变量（重开后重置），走到醒哥那之后变量变为true。
  - 每次走到传送点（checkpoints，自动存档够呛能实现，不过checkpoints解锁和互相传送没问题）时，自动弹出。
    - 传送的实现方式猜想：（直接按键传送吧……），复杂一点就再做个UI。看情况
  - 可购买道具列表：购买道具按键：B（Buy）、N（在B旁边，反正一共就俩道具）
    - 醒哥的激励：勇气增加，购买后1min之内加快护盾槽恢复速度
      - 实现方式猜想：（简单一点的实现：维护一个主角的变量，SP回复是否加速，是就回得多，否则回的一般，复杂实现就是buff槽了）
    - 大力饮料：可以增加充能槽最大值
      - 实现方式猜想：显然，修改主角信息
- 城堡地图：
  - 从下往上，先定个5层画画看。每一层之间通过起点和终点相连。
  - 做一个全封闭，类似于S型曲线这种路线，相对比较简单。等后面ok了之后再尝试每一层之内加一些必须通过跳跃才能过的空隙。
  - 最理想的情况是，自己写一个地图生成器，然后后面就只需要传JSON。这个有点费时间，所以就还是先都在脚本里写成固定数值。
- 杂项
  - 需要一个地方保存游戏刚开始时候得初始状态
    - 人物属性：血量，初始金钱，初始护盾充能最大值（=2），攻击力，SP恢复速度
    - checkpoints解锁进度：除了开局的传送点默认为开，其他全为关
    - 是否救出醒哥：否 （也就不能买道具）
    - 是否可在传送点（checkpoints）传送：否
      - 只要第一次走到了新的传送点，就可以在传送点之间来回传送。传送快捷键：T（Teleport），R（Return），T是往下一个传送点，R是上一个传送点。如果到头了就回到数组开头的地方重新找。